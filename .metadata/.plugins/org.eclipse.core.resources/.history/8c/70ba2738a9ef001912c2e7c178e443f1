package ie.gmit.ds;

import static io.grpc.stub.ClientCalls.asyncUnaryCall;

import com.google.protobuf.ByteString;

import ie.gmit.ds.PasswordServiceGrpc.PasswordServiceImplBase;

public class PasswordServiceImpl extends PasswordServiceImplBase {
	
	@Override
	 public void hash(ie.gmit.ds.HashRequest request,
		        io.grpc.stub.StreamObserver<ie.gmit.ds.HashResponse> responseObserver) {
		 byte[] salt = Passwords.getNextSalt();  
		 byte[] hashed = Passwords.hash(request.getPassword().toCharArray(), salt);
		 
		 System.out.println(salt + " " + hashed);
		 HashResponse.newBuilder().build().getHashed(ByteString.copyFrom(hashed)).
	}
}
